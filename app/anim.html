<!DOCTYPE html>
<html ng-app="mtMixTubeApp" ng-controller="mtRootCtrl as rootCtrl">
<head>
    <!--preventing the user to zoom is not really nice but this is to prevent the browser from zooming when an input is focused-->
    <meta name=viewport content="width=device-width, initial-scale=1, user-scalable=no">
    <title></title>
    <link rel="stylesheet" href="bower_components/reset-css/reset.css" type="text/css">
    <link rel="stylesheet" href="styles/vendor/fontello/fontello.css" type="text/css">
    <link rel="stylesheet" href="styles/css/anim.css" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,700|Open+Sans+Condensed:300|Oleo+Script+Swash+Caps:400"
          rel="stylesheet" type="text/css">
</head>
<body ng-app="app" mt-mouse-interaction-detection="mt-mouse-based-interaction">
<div class="mt-debug-bar" ng-show="props.showDebugBar">
    <div class="mt-debug-bar__container">
        <button class="mt-debug-bar__button modal" ng-click="toggleModal(2)">
            Ms
        </button>
        <button class="mt-debug-bar__button modal" ng-click="toggleModal(7)">
            Ml
        </button>
        <button class="mt-debug-bar__button notifications" ng-click="toggleNotification()">
            Ne
        </button>
        <button class="mt-debug-bar__button notifications" ng-click="toggleComingNext()">
            Ncn
        </button>
        <button class="mt-debug-bar__button search" ng-click="toggleSearch()">
            S
        </button>
        <button class="mt-debug-bar__button queue-items" ng-click="appendQueueItem()">
            Ia
        </button>
        <button class="mt-debug-bar__button queue-items" ng-click="insertQueueItem()">
            Ii
        </button>
        <button class="mt-debug-bar__button queue-items" ng-click="switchActiveQueueItem()" title="Switch active item">
            Is
        </button>
        <button class="mt-debug-bar__button activity" ng-click="toggleActivity()">
            A
        </button>
    </div>
</div>

<div class="mt-app-overlay" ng-show="props.showModal">
    <div class="mt-modal">
        <div class="mt-modal__container">
            <h2 class="mt-modal__title">The title of the modal</h2>

            <div class="mt-modal__content">
                <!-- the following div is the only way I found to fix a rendering problem in Chrome and Safari mobile -->
                <!-- where the hidden part of the overflowing zone is never rendered -->
                <div>
                    <p ng-repeat="i in props.modalLines">
                        Some random content probably very important!
                        <br>Please be careful with that, if you miss it you miss it
                    </p>
                </div>
            </div>

            <div class="mt-modal__commands">
                <button class="mt-modal__button" ng-click="void()">Confirm</button>
                <button class="mt-modal__button secondary" ng-click="void()">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="mt-app-overlay" ng-show="rootCtrl.queueLoading">
    <p class="mt-queue-loading__message">Loading queue, please wait...</p>

    <div class="mt-queue-loading__progress">
        <progress></progress>
    </div>
</div>

<div class="video-container" ng-hide="false">
    <div class="video"></div>
</div>

<div class="mt-app">
    <div class="mt-header" mt-search-input>
        <div class="mt-header__bg mt-header__bg__animation-show"></div>
        <div class="mt-header__container">
            <div class="start">
                <h1 class="mt-header__app-title">
                    <span class="logo">M</span><span class="remaining">ixtube</span>
                </h1>
            </div>
            <div class="center">
                <div class="mt-header__playback-buttons mt-header__playback-buttons__animation-class"
                     ng-class="{'pause': !props.showPlayButton}">
                    <button class="mt-header__playback-button play" data-mt-icon="&#xe805"
                            ng-click="togglePlayButton()">
                        <span class="mt-replaced-text">Play</span>
                    </button>
                    <button class="mt-header__playback-button pause" data-mt-icon="&#xe804"
                            ng-click="togglePlayButton()">
                        <span class="mt-replaced-text">Pause</span>
                    </button>
                </div>
            </div>
            <div class="end">
                <!--just padding container to ensure proper centering of header-center -->
            </div>
        </div>

        <button class="mt-search-input__button mt-js-search-input__button" data-mt-icon="&#xe800">
            <span class="mt-replaced-text">Search</span>
        </button>

        <!-- use form element so that we can intercept submit event triggered by virtual keyboard in mobile browsers -->
        <form class="mt-search-input mt-search-input__animation-toggle mt-js-search-input__form">
            <!-- we could use search input type but we actually don't want the "services" brought by it (cancel button...) -->
            <input ng-model="props.searchTerm" class="mt-search-input__field mt-js-search-input__field"
                   placeholder="Search video" size="30" autocomplete="off" autocorrect="off" autocapitalize="off"
                   spellcheck="false">

            <div class="mt-search-input__fake-field" data-mt-placeholder="Search video"></div>
        </form>
    </div>

    <div class="mt-body">

        <div class="mt-notifications-center">

            <div class="mt-notifications-center__container" ng-if="props.showNotification">
                <div class="mt-notification error">
                    <button class="mt-notification__dismiss-button">&times;</button>
                    <div class="mt-notification__content">
                        <div class="text">
                            Some random content probably very important! Please be careful with that, if you miss it you
                            miss it
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-notifications-center__container" ng-if="props.showComingNext">
                <div class="mt-notification">
                    <button class="mt-notification__dismiss-button">&times;</button>
                    <div class="mt-notification__content">
                        <div class="thumbnail">
                            <div class="mt-notification__image"
                                 ng-style="{'background-image': 'url(http://i1.ytimg.com/vi/djE-BLrdDDc/mqdefault.jpg)'}"></div>
                        </div>
                        <div class="text">
                            <div class="mt-coming-next__group">
                                <div class="mt-coming-next__header">It was:</div>
                                <div class="mt-coming-next__title">
                                    Kaaris : "J'ai mis 13ans pour faire un Plan√®te Rap, y'a rien
                                    d'exceptionnel !"
                                </div>
                            </div>
                            <div class="mt-coming-next__group next">
                                <div class="mt-coming-next__header">Comming next:</div>
                                <div class="mt-coming-next__title">Ace Hood - Hustle (with lot of details here)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="mt-queue mt-queue__animation-show" mt-scrollable="queue">
            <ul>
                <li class="mt-queue__entry mt-js-queue__entry__animation-repeat"
                    ng-repeat="entry in props.queue.entries"
                    ng-class="{'active': entry === props.activeQueueEntry, 'broken': entry.skippedAtRuntime}"
                    ng-controller="mtQueueEntryCtrl as queueEntryCtrl"
                    mt-anchor="{{entry.id}}">
                    <button class="mt-queue__entry__thumbnail" ng-click="queueEntryCtrl.playQueueEntry(entry)">
                        <div ng-style="{'background-image': 'url(' + entry.video.thumbnailUrl + ')'}"
                             class="image"></div>
                        <p class="mt-queue__entry__broken-message">Couldn't load this video</p>

                        <div class="mt-queue__entry__progress" ng-show="queueEntryCtrl.pending">
                            <progress></progress>
                        </div>
                    </button>
                    <div class="mt-queue__entry__data">
                        <p class="mt-queue__entry__title">
                            {{entry.video.title}}
                        </p>

                        <div class="mt-queue__entry__commands">
                            <button class="mt-queue__entry__remove-button" data-mt-icon="&#xe801"
                                    ng-click="queueEntryCtrl.removeQueueEntry(entry)">
                                <span class="mt-replaced-text">Remove</span>
                            </button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="mt-search mt-search__animation-show" ng-controller="mtSearchCtrl as searchCtrl"
             ng-show="searchCtrl.searchShown">
            <div class="mt-search__provider" ng-repeat="(pId, pLabel) in {youtube: 'YouTube'}">
                <div class="mt-search__provider__header">
                    <h3 class="title">{{pLabel}}</h3>

                    <div class="progress" ng-show="searchCtrl.pending[pId]">
                        <progress></progress>
                    </div>
                </div>

                <p class="mt-search__no-results-message"
                   ng-show="searchCtrl.delivered[pId] && searchCtrl.results[pId].length === 0 && props.searchTerm">
                    Sorry, no video found on {{pLabel}} for "{{props.searchTerm}}". Please try with another title.
                </p>

                <ul class="mt-results">
                    <li class="mt-result" ng-repeat="searchResult in searchCtrl.results[pId]"
                        ng-controller="mtSearchResultCtrl as searchResultCtrl">
                        <button class="mt-result__container"
                                ng-click="searchResultCtrl.appendResultToQueue(searchResult)">
                            <div class="mt-result__add-affordance"></div>

                            <div class="mt-result__thumbnail"
                                 ng-style="{'background-image': 'url(' + searchResult.thumbnailUrl + ')'}">
                                <div class="mt-result__added-confirmation mt-result__added-confirmation__animation-if"
                                     ng-if="searchResultCtrl.confirmationShown">
                                    <div class="text" mt-short-text="Video added to the queue">
                                        <span class="mt-replaced-text">Video added to the queue. 5 remaining tunes before yours to be played. Enjoy!</span>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-result__data">
                                <p class="title">{{searchResult.title}}</p>
                            </div>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- build:js scripts/ext-dependencies.js -->
<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/angular-animate/angular-animate.js"></script>
<script src="bower_components/angular-touch/angular-touch.js"></script>
<script src="bower_components/bezier-easing/index.js"></script>
<script src="bower_components/lodash/dist/lodash.js"></script>
<!-- endbuild -->

<!-- build:js scripts/app.js -->
<script src="scripts/v2/bootstrap.js"></script>
<script src="scripts/libs/tools.js"></script>
<script src="scripts/v2/controllers.js"></script>
<script src="scripts/v2/misc.js"></script>
<script src="scripts/services/configuration.js"></script>
<script src="scripts/services/logger-factory.js"></script>
<script src="scripts/services/queue-manager.js"></script>
<script src="scripts/services/youtube-client.js"></script>
<script src="scripts/v2/services/scrollables-manager.js"></script>
<script src="scripts/v2/directives/scrollable.js"></script>
<!-- endbuild -->

</body>
</html>